<!DOCTYPE html>




<html class="theme-next gemini" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.3">



  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="JavaScript," />










<meta name="description" content="var 和 let/const 的比较 除了 var ，我们现在还可以使用两个新的标识符来定义一个变量 — let 和 const。和 var 不一样的是，let 和 const 不存在变量提升。">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="ES6手册">
<meta property="og:url" content="https://chongdee.github.io/2017/12/05/JavaScript/ES6手册/index.html">
<meta property="og:site_name" content="andy Wong&#39;s Blog">
<meta property="og:description" content="var 和 let/const 的比较 除了 var ，我们现在还可以使用两个新的标识符来定义一个变量 — let 和 const。和 var 不一样的是，let 和 const 不存在变量提升。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2021-05-08T17:04:53.933Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ES6手册">
<meta name="twitter:description" content="var 和 let/const 的比较 除了 var ，我们现在还可以使用两个新的标识符来定义一个变量 — let 和 const。和 var 不一样的是，let 和 const 不存在变量提升。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://chongdee.github.io/2017/12/05/JavaScript/ES6手册/"/>





  <title>ES6手册 | andy Wong's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?63d30ffc3ac0fa4a98c97c20372430af";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">andy Wong's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">知道的越多，不知道的越多</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://chongdee.github.io/2017/12/05/JavaScript/ES6手册/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="andy Wong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/doggy.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="andy Wong's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ES6手册</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-05T15:05:56+08:00">
                2017-12-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <script src="\assets\js\APlayer.min.js"> </script><h2 id="var-和-let-const-的比较"><a href="#var-和-let-const-的比较" class="headerlink" title="var 和 let/const 的比较"></a>var 和 let/const 的比较</h2><div class="note info"><p> 除了 var ，我们现在还可以使用两个新的标识符来定义一个变量 — let 和 const。<br>和 var 不一样的是，let 和 const 不存在变量提升。 </p></div>
<a id="more"></a>
<p>使用var的栗子：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'global'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFood</span><span class="params">(food)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (food) &#123;</span><br><span class="line">        <span class="keyword">var</span> name = <span class="string">'local'</span>;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line">getFood(<span class="literal">false</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<p>当我们用 let 代替 var 的时候，观察会发生什么：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">'global'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFood</span>(<span class="params">food</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (food) &#123;</span><br><span class="line">        <span class="keyword">let</span> name = <span class="string">'local'</span>;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line">getFood(<span class="literal">false</span>); <span class="comment">// 'global'</span></span><br></pre></td></tr></table></figure></p>
<p>当我们重构使用 var 的老代码的时候应该注意上面的变化。盲目地使用 let 替换 var 可能会出现出乎意料的情况。</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(x); <span class="regexp">//</span> ReferenceError: x <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br><span class="line">let x = <span class="string">'hi'</span>;</span><br></pre></td></tr></table></figure>
<div class="note warning"><p><strong>注意：</strong> let 和 const 是块级作用域，因此在变量未被定义之前使用它会产生一个 ReferenceError。 </p></div>

<div class="note info"><p><strong>最佳实践：</strong> 在早前代码中使用 var 声明意味着需要很小心地编写代码；而当在新的项目编写代码，使用 let 声明一个可以改变的变量，用 const(常量)声明一个不能被重新赋值的变量。 </p></div>
<h2 id="用块级作用域代替-IIFES"><a href="#用块级作用域代替-IIFES" class="headerlink" title="用块级作用域代替 IIFES"></a>用块级作用域代替 IIFES</h2><div class="note info"><p><strong>函数立即执行表达式</strong>的常见用法是创造一个闭包作用域的函数，在 ES6 中，我们能够创造一个块级作用域<br>而不单单限于函数作用域。 </p></div>
<p>IIFES：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">'ChaChaHui'</span>;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// Reference Error</span></span><br></pre></td></tr></table></figure></p>
<p>使用 ES6 的块级作用域：<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    let <span class="built_in">name</span> = <span class="string">'ChaChaHui'</span>;</span><br><span class="line">&#125;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">name</span>); <span class="comment">// Reference Error</span></span><br></pre></td></tr></table></figure></p>
<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p>我们经常需要给嵌套函数维护一个作用域的上下文 <strong>this</strong>。<br>看看这个栗子：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.prefixName = <span class="function"><span class="keyword">function</span> <span class="params">(arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.map(<span class="function"><span class="keyword">function</span> <span class="params">(character)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name + character; <span class="comment">// Cannot read property 'name' of undefined</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>一个常用的解决办法是把 <strong>this</strong> 存在一个变量中：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.prefixName = <span class="function"><span class="keyword">function</span> <span class="params">(arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// Store the context of this</span></span><br><span class="line">    <span class="keyword">return</span> arr.map(<span class="function"><span class="keyword">function</span> <span class="params">(character)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> that.name + character;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>我们也可以传递一个合适的 <strong>this</strong> 上下文：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.prefixName = <span class="function"><span class="keyword">function</span> <span class="params">(arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.map(<span class="function"><span class="keyword">function</span> <span class="params">(character)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name + character;</span><br><span class="line">    &#125;, <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们还可以绑定上下文：<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> Person(<span class="keyword">name</span>) &#123;</span><br><span class="line">    this.<span class="keyword">name</span> = <span class="keyword">name</span>;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.prefixName = <span class="function"><span class="keyword">function</span></span> (arr) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.map(<span class="function"><span class="keyword">function</span></span> (<span class="keyword">character</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> this.<span class="keyword">name</span> + <span class="keyword">character</span>;</span><br><span class="line">    &#125;.<span class="keyword">bind</span>(this));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>使用 <strong>箭头函数</strong>，<strong>this</strong> 将不会受到影响，并且我们可以重写上面的函数：</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> Person(<span class="keyword">name</span>) &#123;</span><br><span class="line">    this.<span class="keyword">name</span> = <span class="keyword">name</span>;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.prefixName = <span class="function"><span class="keyword">function</span></span> (arr) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.map(<span class="keyword">character</span> =&gt; this.<span class="keyword">name</span> + <span class="keyword">character</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<div class="note info"><p><strong>最佳实践:</strong>当你需要维护一个 <strong>this</strong> 上下文的时候，如在回调函数中推荐使用箭头函数，这样就可以绑定上下文 <strong>this</strong></p></div>
<p>在我们写一个函数的时候，箭头函数更加简洁并且可以很简单地返回一个值：<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var squares = arr.map(<span class="keyword">function</span> <span class="title"></span>(x) &#123; <span class="keyword">return</span> <span class="type">x</span> * x &#125;); // <span class="keyword">Function</span> <span class="title">Expression</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">const squares = arr.map(x =&gt; x * x); <span class="comment">// Arrow Function for terser implementation</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>最佳实践:</strong>尽可能的使用箭头函数代替原来的写法。</p>
</blockquote>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>在 ES6 中，标准库升级了很多，在这些变化中有许多新的字符串方法，比如 .includes( ) 和 .repeat( )。<br><strong>.includes()</strong><br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">var</span> <span class="built_in">string</span> = <span class="string">'food'</span>;</span><br><span class="line"><span class="built_in">var</span> substring = <span class="string">'foo'</span>;</span><br><span class="line">console.<span class="keyword">log</span>(<span class="built_in">string</span>.indexOf(substring) &gt; <span class="number">-1</span>);</span><br></pre></td></tr></table></figure></p>
<p>之前我们使用 <strong>.indexOf( )</strong> 函数的返回值是否 &gt;-1 来判断字符串是否包含某些字符串，现在我们更简单地使用 <strong>.includes ( )</strong>来返回一个布尔值来判断：<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const <span class="keyword">string</span> = <span class="string">'food'</span>;</span><br><span class="line">const <span class="keyword">substring</span> = <span class="string">'foo'</span>;</span><br><span class="line">console.<span class="keyword">log</span>(<span class="keyword">string</span>.includes(<span class="keyword">substring</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p><strong>.repeat( )</strong><br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function <span class="keyword">repeat</span>(<span class="built_in">string</span>, <span class="built_in">count</span>) &#123;</span><br><span class="line">    var strings = [];</span><br><span class="line">    <span class="keyword">while</span>(strings.<span class="built_in">length</span> &lt; <span class="built_in">count</span>) &#123;</span><br><span class="line">        strings.push(<span class="built_in">string</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="built_in">    return</span> strings.join('');</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 ES6 中，可以更简便地实现：<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// String.repeat(numberOfRepetitions)</span></span><br><span class="line"><span class="string">'meow'</span>.<span class="keyword">repeat</span><span class="comment">(3)</span>; <span class="comment">// 'meowmeowmeow'</span></span><br></pre></td></tr></table></figure></p>
<h3 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h3><p>使用<strong>模版字符串</strong>我们就可以不用对某些特殊字符进行转义处理了：<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var <span class="keyword">text</span> = <span class="string">"This string contains \"</span><span class="built_in">double</span> quotes\<span class="string">" which are escaped."</span>;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let <span class="built_in">text</span> = `This <span class="built_in">string</span> <span class="keyword">contains</span> <span class="string">"double quotes"</span> which don't need <span class="keyword">to</span> be escaped anymore.`;</span><br></pre></td></tr></table></figure>
<p><strong>模板字符串</strong>还支持插入，可以把变量值和字符串连接起来。<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">name</span> = <span class="string">'Tiger'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">13</span>;</span><br><span class="line">console.log(<span class="string">'My cat is named '</span> + <span class="keyword">name</span> + <span class="string">' and is '</span> + age + <span class="string">' years old.'</span>);</span><br></pre></td></tr></table></figure></p>
<p>ES6语法更简单：<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">name</span> = <span class="string">'Tiger'</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">13</span>;</span><br><span class="line">console.log(`My cat <span class="keyword">is</span> named $<span class="comment">&#123;name&#125;</span> <span class="keyword">and</span> <span class="keyword">is</span> $<span class="comment">&#123;age&#125;</span> years old.`);</span><br></pre></td></tr></table></figure></p>
<p>在 ES5 中，需要换行时，需要这样：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var text</span> = (</span><br><span class="line">    <span class="string">'cat\n'</span> +</span><br><span class="line">    <span class="string">'dog\n'</span> +</span><br><span class="line">    <span class="string">'nickelodeon'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>或者这样：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> text = [</span><br><span class="line">    <span class="string">'cat'</span>,</span><br><span class="line">    <span class="string">'dog'</span>,</span><br><span class="line">    <span class="string">'nickelodeon'</span></span><br><span class="line">].<span class="keyword">join</span>(<span class="string">'\n'</span>);</span><br></pre></td></tr></table></figure></p>
<p><strong>模板字符串</strong>可以支持换行并且不需要额外的处理：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> text = ( `cat</span><br><span class="line">dog</span><br><span class="line">nickelodeon`</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p><strong>模板字符串</strong>还支持表达式：<br><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> today = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">let</span> text = `The <span class="built_in">time</span> <span class="keyword">and</span> <span class="built_in">date</span> <span class="keyword">is</span> $&#123;today.toLocaleString()&#125;`;</span><br></pre></td></tr></table></figure></p>
<h2 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h2><p>解构可以让我们用一个更简便的语法从一个数组或者对象（即使是深层的）中分离出来值，并存储他们。</p>
<h3 id="解构数组"><a href="#解构数组" class="headerlink" title="解构数组"></a>解构数组</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var arr</span> = [1, 2, 3, 4];</span><br><span class="line"><span class="attribute">var a</span> = arr[0];</span><br><span class="line"><span class="attribute">var b</span> = arr[1];</span><br><span class="line"><span class="attribute">var c</span> = arr[2];</span><br><span class="line"><span class="attribute">var d</span> = arr[3];</span><br></pre></td></tr></table></figure>
<p>数组解构赋值：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let [a, b, c, d] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">console.log(a); <span class="comment">// 1</span></span><br><span class="line">console.log(b); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<h3 id="解构对象"><a href="#解构对象" class="headerlink" title="解构对象"></a>解构对象</h3><h4 id="最基本的解构"><a href="#最基本的解构" class="headerlink" title="最基本的解构"></a>最基本的解构</h4><p>ES5:<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> luke = &#123; occupation: <span class="string">'jedi'</span>, father: <span class="string">'anakin'</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> occupation = luke.occupation; <span class="comment">// 'jedi'</span></span><br><span class="line"><span class="keyword">var</span> father = luke.father; <span class="comment">// 'anakin'</span></span><br></pre></td></tr></table></figure></p>
<p>对象解构赋值：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> luke = &#123; <span class="attr">occupation</span>: <span class="string">'jedi'</span>, <span class="attr">father</span>: <span class="string">'anakin'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;occupation, father&#125; = luke;</span><br><span class="line"><span class="built_in">console</span>.log(occupation); <span class="comment">// 'jedi'</span></span><br><span class="line"><span class="built_in">console</span>.log(father); <span class="comment">// 'anakin'</span></span><br></pre></td></tr></table></figure></p>
<h4 id="解构并使用别名"><a href="#解构并使用别名" class="headerlink" title="解构并使用别名"></a>解构并使用别名</h4><p>有时接口定义的字段往往带有下划线，但我们的前端更便好于驼峰式命名，那么可以使用别名(rename)：<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attribute">id:</span><span class="string"> 123,</span></span><br><span class="line"><span class="string">  nick_name</span>: <span class="string">'hehe'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="title">const</span> &#123;<span class="attribute">nick_name</span>: nickName&#125; = user;</span><br><span class="line"><span class="built_in">console</span>.log(nickName); <span class="comment">//prints: hehe</span></span><br></pre></td></tr></table></figure></p>
<h4 id="解构嵌套对象"><a href="#解构嵌套对象" class="headerlink" title="解构嵌套对象"></a>解构嵌套对象</h4><p>有时我们会遇到嵌套对象，如果我们了解未足够多时，会写出这种解构：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  id: <span class="number">123</span>,</span><br><span class="line">  name: <span class="string">'hehe'</span>,</span><br><span class="line">  education: &#123;</span><br><span class="line">    degree: <span class="string">'Masters'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 假设我们要提取degree</span></span><br><span class="line"><span class="keyword">const</span> &#123;education&#125; = user;</span><br><span class="line"><span class="keyword">const</span> &#123;degree&#125; = education;</span><br></pre></td></tr></table></figure></p>
<p>我们会写两行，一层层的剥开，明显繁琐，如果这个对象有三四层结构那简直无法入目。其实可以用解构一步到位的：<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attribute">id:</span><span class="string"> 123,</span></span><br><span class="line"><span class="string">  name</span>: <span class="string">'hehe'</span>,</span><br><span class="line">  <span class="attribute">education</span>: &#123;</span><br><span class="line">    <span class="attribute">degree</span>: <span class="string">'Masters'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title">const</span> &#123;<span class="attribute">education</span>: &#123;degree&#125;&#125; = user;</span><br><span class="line"><span class="built_in">console</span>.log(degree); <span class="comment">//prints: Masters</span></span><br></pre></td></tr></table></figure></p>
<p>没错，就是比别名方法多了一个{ }</p>
<blockquote>
<p><strong>如果没有外层怎么办</strong></p>
</blockquote>
<p>假设要解构的数据是由接口返回的，由于某种原因会导致某个字段丢失。我们会往往遇到这种意外：<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const user = &#123;</span><br><span class="line">  id: <span class="number">123</span>,</span><br><span class="line">  name: <span class="string">'hehe'</span></span><br><span class="line">&#125;;</span><br><span class="line">const &#123;education: &#123;degree&#125;&#125; = user;  // TypeError: Cannot match against <span class="string">'undefined'</span> or <span class="string">'null'</span>.</span><br></pre></td></tr></table></figure></p>
<p>这时你是否会觉得还是我们原始的方法好使：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const education =<span class="built_in"> user </span>|| &#123;&#125;;</span><br><span class="line">const degree = education.degree;</span><br></pre></td></tr></table></figure></p>
<p>其实，神奇的解构可以让你定义一个缺省值，这样，我们不仅可以达到数据防御的目的，而且告别啰嗦的写法了：<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attribute">id:</span><span class="string"> 123,</span></span><br><span class="line"><span class="string">  name</span>: <span class="string">'hehe'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title">const</span> &#123;</span><br><span class="line">    <span class="attribute">education</span>: &#123;</span><br><span class="line">        degree</span><br><span class="line">    &#125; = &#123;&#125;</span><br><span class="line">&#125; = user;</span><br><span class="line"><span class="built_in">console</span>.log(degree); <span class="comment">//prints: undefined</span></span><br></pre></td></tr></table></figure></p>
<p>这明显是一股清流啊。</p>
<blockquote>
<p><strong>更深层次的对象怎么办？</strong></p>
</blockquote>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const user = &#123;</span><br><span class="line">  id: <span class="number">123</span>,</span><br><span class="line">  <span class="built_in">name</span>: <span class="string">'hehe'</span></span><br><span class="line">&#125;;</span><br><span class="line">const &#123;</span><br><span class="line">    education: &#123;</span><br><span class="line">        school: &#123;</span><br><span class="line">            <span class="built_in">name</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; = &#123;</span><br><span class="line">        school: &#123;</span><br><span class="line">            <span class="built_in">name</span>: <span class="string">'NB'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; = user;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">name</span>); <span class="comment">//prints: NB</span></span><br></pre></td></tr></table></figure>
<p>这样整体给education设置一个缺省值，可读性更强，这又是一股清流。<br>在代码中灵活使用解构不仅可以使代码简洁可读，而且逼格大大提升。</p>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>在 ES6 之前，我们使用<strong>Browserify</strong>这样的库来创建客户端的模块化，在<strong>node.js</strong>中使用<strong>require</strong>。<br>在 ES6 中，我们可以直接使用所有类型的模块化（AMD 和 CommonJS）。</p>
<h3 id="使用CommonJS的导出"><a href="#使用CommonJS的导出" class="headerlink" title="使用CommonJS的导出"></a>使用CommonJS的导出</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123; foo: <span class="string">'bar'</span> &#125;;</span><br><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = [<span class="string">'foo'</span>, <span class="string">'bar'</span>];</span><br><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = <span class="function">function <span class="title">bar</span> <span class="params">()</span> </span>&#123;&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="使用ES6的导出"><a href="#使用ES6的导出" class="headerlink" title="使用ES6的导出"></a>使用ES6的导出</h3><p>在ES6中我们可以暴露多个值，使用<strong>exports</strong>：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> <span class="built_in">let</span> name = <span class="string">'David'</span>;</span><br><span class="line"><span class="built_in">export</span> <span class="built_in">let</span> age  = 25;​​</span><br></pre></td></tr></table></figure></p>
<p>或者暴露一个对象列表：<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title">sumTwo</span>(a, b) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">a</span> + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title">sumThree</span>(a, b, c) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">a</span> + b + c;</span><br><span class="line">&#125;</span><br><span class="line">export &#123; sumTwo, sumThree &#125;;</span><br></pre></td></tr></table></figure></p>
<p>我们还可以暴露函数、对象和其他的值，通过简单地使用 export 这个关键字：<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export <span class="keyword">function</span> <span class="title">sumTwo</span>(a, b) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">a</span> + b;</span><br><span class="line">&#125;</span><br><span class="line">export <span class="keyword">function</span> <span class="title">sumThree</span>(a, b, c) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">a</span> + b + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最后，我们还可以绑定一个默认的输出：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumTwo</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumThree</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> api = &#123;</span><br><span class="line">    sumTwo,</span><br><span class="line">    sumThree</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> api;</span><br><span class="line"><span class="comment">/* Which is the same as</span></span><br><span class="line"><span class="comment"> * export &#123; api as default &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>最佳实践</strong>：总是在模块的最后面使用 export default 方法，可以让暴露的东西更加清晰并且可以节省时间去找出暴露出来值的名字。尤其是在 CommonJS 中，常见做法就是暴露一个简单的值或者对象。通过这种模式，可以让我们的代码更加易读，并且允许我们在 ES6 和 CommonJS 模块之间插值。</p>
</blockquote>
<h3 id="ES6-中的导入"><a href="#ES6-中的导入" class="headerlink" title="ES6 中的导入"></a>ES6 中的导入</h3><p>在 ES6 中同样提供了多样的导入方式，我们可以这么导入一个整个文件：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">import</span> 'underscore';</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>需要着重注意的一点是简单的导入整个文件会在那个文件的顶部执行所有的代码</p>
</blockquote>
<p>和 Python 中类似，我们可以命名导入的值：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sumTwo, sumThree &#125; <span class="keyword">from</span> <span class="string">'math/addition'</span>;</span><br></pre></td></tr></table></figure></p>
<p>我们还可以重命名导入：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    sumTwo <span class="keyword">as</span> addTwoNumbers,</span><br><span class="line">    sumThree <span class="keyword">as</span> sumThreeNumbers</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'math/addition'</span>;</span><br></pre></td></tr></table></figure></p>
<p>另外，我们可以导入所有的东西（整体加载）：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> util <span class="keyword">from</span> <span class="string">'math/addition'</span>;</span><br></pre></td></tr></table></figure></p>
<p>最后，我们可以从一个模块中导入一个值的列表：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> additionUtil <span class="keyword">from</span> <span class="string">'math/addition'</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; sumTwo, sumThree &#125; = additionUtil;</span><br></pre></td></tr></table></figure></p>
<p>可以像这样导入默认绑定的输出：<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'math/addition'</span>;</span><br><span class="line"><span class="regexp">//</span> Same as: <span class="keyword">import</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> api &#125; <span class="keyword">from</span> <span class="string">'math/addition'</span>;</span><br></pre></td></tr></table></figure></p>
<p>虽然最好保持导出的简单，但如果需要的话我们有时可以混合默认的导入和混合导入。当我们这样导出的时候：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foos.js</span></span><br><span class="line"><span class="keyword">export</span> &#123; foo <span class="keyword">as</span> <span class="keyword">default</span>, foo1, foo2 &#125;;</span><br></pre></td></tr></table></figure></p>
<p>我们可以这样导入它们：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> foo, &#123; foo1, foo2 &#125; <span class="keyword">from</span> <span class="string">'foos'</span>;</span><br></pre></td></tr></table></figure></p>
<p>当我们用<strong>Commonjs</strong>的语法导入一个模块的暴露出口时（比如 React），我们可以这样做：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; Component, PropTypes &#125; = React;</span><br></pre></td></tr></table></figure></p>
<p>还有更精简的写法：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>注意：</strong>导出的值是动态引用的，而不是拷贝。因此，在一个模块中改变一个变量的绑定将影响输出模块中的值。应该避免改变这些导出值的公共接口。</p>
</blockquote>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><p>在 ES5 中，在函数中我们需要各种操作去处理<strong>默认参数</strong>、<strong>不定参数</strong>和<strong>重命名参数</strong>等需求，在 ES6 中我们可以使用更简洁的语法完成这些需求：</p>
<h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title">addTwoNumbers</span>(x, y) &#123;</span><br><span class="line">    x = x || 0;</span><br><span class="line">    y = y || 0;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">x</span> + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ES6 中，函数的参数可以支持设置默认值：<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title">addTwoNumbers</span>(x=0, y=0) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">x</span> + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">addTwoNumbers</span>(<span class="number">2</span>, <span class="number">4</span>); <span class="comment">// 6</span></span><br><span class="line"><span class="selector-tag">addTwoNumbers</span>(<span class="number">2</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="selector-tag">addTwoNumbers</span>(); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<h3 id="rest-参数"><a href="#rest-参数" class="headerlink" title="rest 参数"></a>rest 参数</h3><p>在 ES5 中，我们需要这么处理不定参数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logArguments</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用<strong>rest</strong>，我们就可以处理不确定数目的参数：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logArguments</span><span class="params">(<span class="rest_arg">...args</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (let arg of args) &#123;</span><br><span class="line">        console.log(arg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="命名参数"><a href="#命名参数" class="headerlink" title="命名参数"></a>命名参数</h3><p>在 ES5 中是使用配置对象的模式来处理命名参数，jQuery 中的使用：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initializeCanvas</span><span class="params">(options)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> height = options.height || <span class="number">600</span>;</span><br><span class="line">    <span class="keyword">var</span> width  = options.width  || <span class="number">400</span>;</span><br><span class="line">    <span class="keyword">var</span> lineStroke = options.lineStroke || <span class="string">'black'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们可以利用解构的一个函数的形参实现相同的功能：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initializeCanvas</span><span class="params">(&#123; height=600, width=400, lineStroke=<span class="string">'black'</span>&#125;)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Use variables height, width, lineStroke here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果我们想使整个值可选择，我们可以解构赋值一个空的对象：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initializeCanvas</span><span class="params">(&#123; height=600, width=400, lineStroke=<span class="string">'black'</span>&#125; = &#123;&#125;)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="展开操作"><a href="#展开操作" class="headerlink" title="展开操作"></a>展开操作</h3><p>在 ES5 中，我们可以 apply Math.max 方法来获得一个数组中的最大值：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Math.max.apply(null, [<span class="number">-1</span>, <span class="number">100</span>, <span class="number">9001</span>, <span class="number">-32</span>]); <span class="comment">// 9001</span></span><br></pre></td></tr></table></figure></p>
<p>在 ES6 中，我们可以通过展开操作把一个数组的值作为参数传递给一个函数：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Math.max(...[<span class="number">-1</span>, <span class="number">100</span>, <span class="number">9001</span>, <span class="number">-32</span>]); <span class="comment">// 9001</span></span><br></pre></td></tr></table></figure></p>
<p>我们可以更简洁地使用这个语法来合并数组：<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let cities = [<span class="string">'San Francisco'</span>, <span class="string">'Los Angeles'</span>];</span><br><span class="line">let places = [<span class="string">'Miami'</span>, ...cities, <span class="string">'Chicago'</span>]; // [<span class="string">'Miami'</span>, <span class="string">'San Francisco'</span>, <span class="string">'Los Angeles'</span>, <span class="string">'Chicago'</span>]</span><br></pre></td></tr></table></figure></p>
<h2 id="类Classes"><a href="#类Classes" class="headerlink" title="类Classes"></a>类Classes</h2><p>在 ES6 之前，我们通过构造函数来创造一个类，并且通过原型来扩展属性：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name, age, gender)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name   = name;</span><br><span class="line">    <span class="keyword">this</span>.age    = age;</span><br><span class="line">    <span class="keyword">this</span>.gender = gender;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.incrementAge = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age += <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>然后可以这样继承类：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Personal</span>(<span class="params">name, age, gender, occupation, hobby</span>) </span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>, name, age, gender);</span><br><span class="line">    <span class="keyword">this</span>.occupation = occupation;</span><br><span class="line">    <span class="keyword">this</span>.hobby = hobby;</span><br><span class="line">&#125;</span><br><span class="line">Personal.prototype = <span class="built_in">Object</span>.create(Person.prototype);</span><br><span class="line">Personal.prototype.constructor = Personal;</span><br><span class="line">Personal.prototype.incrementAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Person.prototype.incrementAge.call(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.age += <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>在 ES6 中，提供了更多的语法糖，可以直接创造一个类：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name, age, gender) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name   = name;</span><br><span class="line">        <span class="keyword">this</span>.age    = age;</span><br><span class="line">        <span class="keyword">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line">    incrementAge() &#123;</span><br><span class="line">      <span class="keyword">this</span>.age += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用 extends 关键字来继承一个类：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Personal</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    constructor(name, age, gender, occupation, hobby) &#123;</span><br><span class="line">        <span class="keyword">super</span>(name, age, gender);</span><br><span class="line">        <span class="keyword">this</span>.occupation = occupation;</span><br><span class="line">        <span class="keyword">this</span>.hobby = hobby;</span><br><span class="line">    &#125;</span><br><span class="line">    incrementAge() &#123;</span><br><span class="line">        <span class="keyword">super</span>.incrementAge();</span><br><span class="line">        <span class="keyword">this</span>.age += <span class="number">20</span>;</span><br><span class="line">        console.log(<span class="keyword">this</span>.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>最佳实践：</strong>虽然使用 ES6 的语法创造类的时候，js引擎是如何实现类以及如何操作原型是令人费解的，但是未来对初学者来说这是一个好的开始，同时也可以让我们写更简洁的代码。</p>
</blockquote>
<h2 id="Symbols"><a href="#Symbols" class="headerlink" title="Symbols"></a>Symbols</h2><p><strong>Symbols</strong>在 ES6 之前就已经存在，但是我们现在可以直接使用一个开发的接口了。Symbols 是不可改变并且是独一无二的，可以在任意哈希中作一个key。<br><strong>Symbol()</strong><br>调用 Symbol() 或者 Symbol(description) 可以创造一个独一无二的符号，但是在全局是看不到的。Symbol() 的一个使用情况是给一个类或者命名空间打上补丁，但是可以确定的是你不会去更新它。比如，你想给 React.Component 类添加一个 refreshComponent 方法，但是可以确定的是你不会在之后更新这个方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> refreshComponent = <span class="built_in">Symbol</span>();</span><br><span class="line">React.Component.prototype[refreshComponent] = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Symbol.for(key)<br>Symbol.for(key) 同样会创造一个独一无二并且不可改变的 Symbol，但是它可以全局看到，两个相同的调用 Symbol.for(key) 会返回同一个 Symbol 类：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>(<span class="string">'foo'</span>) === <span class="built_in">Symbol</span>(<span class="string">'foo'</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Symbol</span>.<span class="keyword">for</span>(<span class="string">'foo'</span>) === <span class="built_in">Symbol</span>(<span class="string">'foo'</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Symbol</span>.<span class="keyword">for</span>(<span class="string">'foo'</span>) === <span class="built_in">Symbol</span>.<span class="keyword">for</span>(<span class="string">'foo'</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>对于 Symbols 的普遍用法（尤其是Symbol.for(key)）是为了协同性。它可以通过在一个第三方插件中已知的接口中对象中的参数中寻找用 Symbol 成员来实现，比如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reader</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> specialRead = <span class="built_in">Symbol</span>.for(<span class="string">'specialRead'</span>);</span><br><span class="line">    <span class="keyword">if</span> (obj[specialRead]) &#123;</span><br><span class="line">        <span class="keyword">const</span> reader = obj[specialRead]();</span><br><span class="line">        <span class="comment">// do something with reader</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'object cannot be read'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在另一个库中：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> specialRead = Symbol.<span class="keyword">for</span>(<span class="string">'specialRead'</span>);</span><br><span class="line"><span class="keyword">class</span> <span class="title">SomeReadableType</span> &#123;</span><br><span class="line">    [<span class="meta">specialRead</span>]() &#123;</span><br><span class="line">        <span class="keyword">const</span> reader = createSomeReaderFrom(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">return</span> reader;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h2><p>Maps 在 JavaScript 中是一个非常必需的数据结构，在 ES6 之前，我们通过对象来创建哈希映射：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">map</span> = <span class="built_in">new</span> Object();</span><br><span class="line"><span class="keyword">map</span>[key1] = <span class="string">'value1'</span>;</span><br><span class="line"><span class="keyword">map</span>[key2] = <span class="string">'value2'</span>;</span><br></pre></td></tr></table></figure></p>
<p>然而有时我们用特殊的方法去修改对象属性时会报错<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> getOwnProperty(&#123; hasOwnProperty: <span class="string">'Hah, overwritten'</span>&#125;, <span class="string">'Pwned'</span>);</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> TypeError: Property <span class="string">'hasOwnProperty'</span> is not a <span class="keyword">function</span></span></span><br></pre></td></tr></table></figure></p>
<p>实际上<strong>Maps</strong>允许我们对值进行 set、get 和 search 操作：<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">map</span> = <span class="literal">new</span> <span class="built_in">Map</span>();</span><br><span class="line">&gt; <span class="built_in">map</span>.<span class="built_in">set</span>(<span class="string">'name'</span>, <span class="string">'david'</span>);</span><br><span class="line">&gt; <span class="built_in">map</span>.get(<span class="string">'name'</span>); <span class="comment">// david</span></span><br><span class="line">&gt; <span class="built_in">map</span>.has(<span class="string">'name'</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Maps</strong>更令人惊奇的部分就是它不仅限于使用字符串作为 key，还可以用其他任何类型的数据作为 key：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="string">'name'</span>, <span class="string">'david'</span>],</span><br><span class="line">    [<span class="literal">true</span>, <span class="string">'false'</span>],</span><br><span class="line">    [<span class="number">1</span>, <span class="string">'one'</span>],</span><br><span class="line">    [&#123;&#125;, <span class="string">'object'</span>],</span><br><span class="line">    [<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;, <span class="string">'function'</span>]</span><br><span class="line">]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> map.keys()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> key);</span><br><span class="line">    <span class="comment">// &gt; string, boolean, number, object, function</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>注意：</strong>但我们使用 map.get() 方法去测试相等时，如果在 Maps 中使用 函数 或者 对象 等非原始类型值的时候测试将不起作用，所以我们应该使用 Strings, Booleans 和 Numbers 这样的原始类型的值。</p>
</blockquote>
<p>我们还可以使用 .entries() 来遍历迭代：<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">let</span> [<span class="built_in">key</span>, value] of <span class="built_in">map</span>.entries()) &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="built_in">key</span>, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>WeakMaps<br>在 ES6 之前，为了存储私有变量，我们有各种各样的方法去实现，其中一种方法就是用命名约定：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(age) &#123;</span><br><span class="line">        <span class="keyword">this</span>._age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    _incrementAge() &#123;</span><br><span class="line">        <span class="keyword">this</span>._age += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>但是命名约定在代码中仍然会令人混淆并且并不会真正的保持私有变量不被访问。现在，我们可以使用<strong>WeakMaps</strong>来存储变量：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> _age = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(age) &#123;</span><br><span class="line">        _age.set(<span class="keyword">this</span>, age);</span><br><span class="line">    &#125;</span><br><span class="line">    incrementAge() &#123;</span><br><span class="line">        <span class="keyword">let</span> age = _age.get(<span class="keyword">this</span>) + <span class="number">1</span>;</span><br><span class="line">        _age.set(<span class="keyword">this</span>, age);</span><br><span class="line">        <span class="keyword">if</span> (age &gt; <span class="number">50</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Midlife crisis'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 WeakMaps 存储变量很酷的一件事是它的 key 他不需要属性名称，可以使用 Reflect.ownKeys() 来查看这一点：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> const person = new Person(50);</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> person.incrementAge(); // <span class="string">'Midlife crisis'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Reflect.ownKeys(person); // []</span></span><br></pre></td></tr></table></figure></p>
<p>一个更实际的实践就是可以 WeakMaps 储存 DOM 元素，而不会污染元素本身：<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">map</span> = <span class="literal">new</span> WeakMap();</span><br><span class="line"><span class="keyword">let</span> el  = document.getElementById(<span class="string">'someElement'</span>);</span><br><span class="line"><span class="comment">// Store a weak reference to the element with a key</span></span><br><span class="line"><span class="built_in">map</span>.<span class="built_in">set</span>(el, <span class="string">'reference'</span>);</span><br><span class="line"><span class="comment">// Access the value of the element</span></span><br><span class="line"><span class="keyword">let</span> value = <span class="built_in">map</span>.get(el); <span class="comment">// 'reference'</span></span><br><span class="line"><span class="comment">// Remove the reference</span></span><br><span class="line">el.parentNode.removeChild(el);</span><br><span class="line">el = <span class="built_in">null</span>;</span><br><span class="line"><span class="comment">// map is empty, since the element is destroyed</span></span><br></pre></td></tr></table></figure></p>
<p>如上所示，当一个对象被垃圾回收机制销毁的时候， WeakMap 将会自动地删除关于这个对象的键值对。</p>
<blockquote>
<p><strong>注意：</strong>为了进一步说明这个例子的可行性，请参考jQuery如何存储与具有引用的DOM元素相对应的对象缓存。使用<strong>WeakMap</strong>，一旦它从文档中删除,jQuery可以自动释放与特定DOM元素相关联的任何内存。一般来说，<strong>WeakMap</strong>对于包装DOM元素的任何库都非常有用。</p>
</blockquote>
<h2 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h2><p>Promises 可以让我们远离平行的代码（回调地狱）：<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func1(<span class="name">function</span> (<span class="name">value1</span>) &#123;</span><br><span class="line">    func2(<span class="name">value1</span>, function (<span class="name">value2</span>) &#123;</span><br><span class="line">        func3(<span class="name">value2</span>, function (<span class="name">value3</span>) &#123;</span><br><span class="line">            func4(<span class="name">value3</span>, function (<span class="name">value4</span>) &#123;</span><br><span class="line">                func5(<span class="name">value4</span>, function (<span class="name">value5</span>) &#123;</span><br><span class="line">                    // Do something with value <span class="number">5</span></span><br><span class="line">                &#125;)<span class="comment">;</span></span><br><span class="line">            &#125;)<span class="comment">;</span></span><br><span class="line">        &#125;)<span class="comment">;</span></span><br><span class="line">    &#125;)<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>转变成垂直代码：<br><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func<span class="number">1</span>(<span class="keyword">value</span><span class="number">1</span>)</span><br><span class="line">    .<span class="keyword">then</span>(func<span class="number">2</span>)</span><br><span class="line">    .<span class="keyword">then</span>(func<span class="number">3</span>)</span><br><span class="line">    .<span class="keyword">then</span>(func<span class="number">4</span>)</span><br><span class="line">    .<span class="keyword">then</span>(func<span class="number">5</span>, <span class="keyword">value</span><span class="number">5</span> =&gt; &#123;</span><br><span class="line">        <span class="comment">// Do something with value 5</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p>
<p>在 ES6 之前，我们使用<a href="https://github.com/petkaantonov/bluebird" target="_blank" rel="noopener">bluebird</a>或者<a href="https://github.com/kriskowal/q" target="_blank" rel="noopener">Q</a>，现在我们可以使用原生的<strong>Promise</strong>了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span></span><br><span class="line">    reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Failed to fulfill Promise'</span>)))</span><br><span class="line">        .catch(<span class="function"><span class="params">reason</span> =&gt;</span> <span class="built_in">console</span>.log(reason));</span><br></pre></td></tr></table></figure></p>
<p>我们有两个处理器，<strong>resolve</strong>（当Promise是 <strong>fulfilled</strong> 时的回调）和 reject（当Promise是<strong>rejected</strong>时的回调）：</p>
<blockquote>
<p><strong>Promises的好处：</strong>对错误的处理使用一些嵌套回调错误提示会使代码很混乱，使用Promise ，我们有一个清晰的路径来处理冒泡的错误并适当地处理它们，在Promis 确定了resolved/rejected之后，他的值是不可改变的－－它永远不会改变。</p>
</blockquote>
<p>这是使用 Promise 的一个实际的栗子：<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var request = require('request')<span class="comment">;</span></span><br><span class="line">return new Promise((<span class="name">resolve</span>, reject) =&gt; &#123;</span><br><span class="line">  request.get(<span class="name">url</span>, (<span class="name">error</span>, response, body) =&gt; &#123;</span><br><span class="line">    if (<span class="name">body</span>) &#123;</span><br><span class="line">        resolve(<span class="name">JSON</span>.parse(<span class="name">body</span>))<span class="comment">;</span></span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        resolve(&#123;&#125;)<span class="comment">;</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>我们还可以使用 Promise.all() 来 并行 处理多个异步函数：<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">let urls = [</span><br><span class="line">  <span class="string">'/api/commits'</span>,</span><br><span class="line">  <span class="string">'/api/issues/opened'</span>,</span><br><span class="line">  <span class="string">'/api/issues/assigned'</span>,</span><br><span class="line">  <span class="string">'/api/issues/completed'</span>,</span><br><span class="line">  <span class="string">'/api/issues/comments'</span>,</span><br><span class="line">  <span class="string">'/api/pullrequests'</span></span><br><span class="line">];</span><br><span class="line">let promises = urls.map(<span class="function"><span class="params">(url)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">    $.ajax(&#123; url: url &#125;)</span><br><span class="line">      .done(<span class="function"><span class="params">(data)</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(data);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">Promise.all(promises)</span><br><span class="line">  .<span class="keyword">then</span>(<span class="function"><span class="params">(results)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="regexp">//</span> Do something with results <span class="keyword">of</span> all our promises</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="Generators-生成器"><a href="#Generators-生成器" class="headerlink" title="Generators 生成器"></a>Generators 生成器</h2><p> 就像 Promises 可以帮我们避免回调地狱，Generators 可以帮助我们让代码风格更整洁－－用同步的代码风格来写异步代码，它本质上是一个可以暂停计算并且可以随后返回表达式的值的函数。<br> 一个简单的栗子使用 generators：<br> <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span>* <span class="title">sillyGenerator</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">yield</span> <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">yield</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line">var generator = sillyGenerator();</span><br><span class="line">&gt; console.<span class="built_in">log</span>(generator.<span class="built_in">next</span>()); // &#123; value: <span class="number">1</span>, done: <span class="literal">false</span> &#125;</span><br><span class="line">&gt; console.<span class="built_in">log</span>(generator.<span class="built_in">next</span>()); // &#123; value: <span class="number">2</span>, done: <span class="literal">false</span> &#125;</span><br><span class="line">&gt; console.<span class="built_in">log</span>(generator.<span class="built_in">next</span>()); // &#123; value: <span class="number">3</span>, done: <span class="literal">false</span> &#125;</span><br><span class="line">&gt; console.<span class="built_in">log</span>(generator.<span class="built_in">next</span>()); // &#123; value: <span class="number">4</span>, done: <span class="literal">false</span> &#125;</span><br></pre></td></tr></table></figure></p>
<p>next 可以回去到下一个 yield 返回的值，当然上面的代码是非常不自然的，我们可以利用 Generators 来用同步的方式来写异步操作：<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Hiding asynchronousity with Generators</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    getJSON(<span class="built_in">url</span>, <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">        generator.next(response);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里的 generator 函数将会返回需要的数据：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> entry1 = <span class="keyword">yield</span> request(<span class="string">'http://some_api/item1'</span>);</span><br><span class="line">    <span class="keyword">var</span> data1  = <span class="built_in">JSON</span>.parse(entry1);</span><br><span class="line">    <span class="keyword">var</span> entry2 = <span class="keyword">yield</span> request(<span class="string">'http://some_api/item2'</span>);</span><br><span class="line">    <span class="keyword">var</span> data2  = <span class="built_in">JSON</span>.parse(entry2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过 yield，我们可以保证 entry1 有 data1 中我们需要解析并储存的数据。<br>虽然我们可以利用 Generators 来用同步的方式来写异步操作，但是确认错误的传播变得不再清晰，我们可以在 Generators 中加上 Promise：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        getJSON(url, resolve);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后我们写一个函数逐步调用 next 并且利用 request 方法产生一个 Promise：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterateGenerator</span><span class="params">(gen)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> generator = gen();</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> <span class="title">iterate</span><span class="params">(val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> ret = generator.next();</span><br><span class="line">        <span class="keyword">if</span>(!ret.done) &#123;</span><br><span class="line">            ret.value.then(iterate);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 Generators 中加上 Promise 之后我们可以更清晰的使用 Promise 中的 .catch 和 reject来捕捉错误，让我们使用新的 Generator，和之前的还是蛮相似的：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">iterateGenerator(<span class="function"><span class="keyword">function</span>* <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> entry1 = <span class="keyword">yield</span> request(<span class="string">'http://some_api/item1'</span>);</span><br><span class="line">    <span class="keyword">var</span> data1  = <span class="built_in">JSON</span>.parse(entry1);</span><br><span class="line">    <span class="keyword">var</span> entry2 = <span class="keyword">yield</span> request(<span class="string">'http://some_api/item2'</span>);</span><br><span class="line">    <span class="keyword">var</span> data2  = <span class="built_in">JSON</span>.parse(entry2);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="Async-Await"><a href="#Async-Await" class="headerlink" title="Async Await"></a>Async Await</h2><p>当 ES6 真正到来的时候，async await 可以用更少的处理实现 Promise 和 Generators 所实现的异步处理：</p>
<blockquote>
<p>async await 是Generators的语法糖</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">'request'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getJSON</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    request(url, <span class="function"><span class="keyword">function</span>(<span class="params">error, response, body</span>) </span>&#123;</span><br><span class="line">      resolve(body);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">await</span> getJSON();</span><br><span class="line">  <span class="built_in">console</span>.log(data); <span class="comment">// NOT undefined!</span></span><br><span class="line">&#125;</span><br><span class="line">main();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在 js 引擎中，它所实现的和 Generators 其实是一样的，我更推荐使用 async await + Promises，更多的资源和使用 ES7 和 用 babel 转化可以<a href="http://masnun.com/2015/11/11/using-es7-asyncawait-today-with-babel.html" target="_blank" rel="noopener">看这里</a>。</p>
</blockquote>
<h2 id="Getter-Setter-函数"><a href="#Getter-Setter-函数" class="headerlink" title="Getter/Setter 函数"></a>Getter/Setter 函数</h2><p>ES6 已经开始实现了 getter 和 setter 函数，比如下面这个栗子：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        <span class="built_in">this</span>._name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> name() &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>._name) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Mr. '</span> + <span class="built_in">this</span>._name.toUpperCase();  </span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> undefined;</span><br><span class="line">      &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> name(<span class="keyword">new</span><span class="type">Name</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">new</span><span class="type">Name</span> == <span class="built_in">this</span>._name) &#123;</span><br><span class="line">        console.log(<span class="string">'I already have this name.'</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">new</span><span class="type">Name</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>._name = <span class="keyword">new</span><span class="type">Name</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> emp = <span class="keyword">new</span> <span class="type">Employee</span>(<span class="string">"James Bond"</span>);</span><br><span class="line"><span class="comment">// uses the get method in the background</span></span><br><span class="line"><span class="keyword">if</span> (emp.name) &#123;</span><br><span class="line">  console.log(emp.name);  <span class="comment">// Mr. JAMES BOND</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// uses the setter in the background</span></span><br><span class="line">emp.name = <span class="string">"Bond 007"</span>;</span><br><span class="line">console.log(emp.name);  <span class="comment">// Mr. BOND 007</span></span><br></pre></td></tr></table></figure></p>
<p>最新版本的浏览器也支持对象中的 getter 和 setter 函数，我们可以使用它们来实现 计算属性，对对象属性添加监听和预处理。<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  firstName: <span class="string">'James'</span>,</span><br><span class="line">  lastName: <span class="string">'Bond'</span>,</span><br><span class="line">  <span class="keyword">get</span> fullName() &#123;</span><br><span class="line">      console.log(<span class="string">'Getting FullName'</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">' '</span> + <span class="keyword">this</span>.lastName;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> fullName (name) &#123;</span><br><span class="line">      console.log(<span class="string">'Setting FullName'</span>);</span><br><span class="line">      <span class="keyword">var</span> words = name.toString().split(<span class="string">' '</span>);</span><br><span class="line">      <span class="keyword">this</span>.firstName = words[<span class="number">0</span>] || <span class="string">''</span>;</span><br><span class="line">      <span class="keyword">this</span>.lastName = words[<span class="number">1</span>] || <span class="string">''</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">person.fullName; <span class="comment">// James Bond</span></span><br><span class="line">person.fullName = <span class="string">'Bond 007'</span>;</span><br><span class="line">person.fullName; <span class="comment">// Bond 007</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>Buy me a cup of coffee,thanks!</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="andy Wong 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="andy Wong 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/05/hexoTutorial/" rel="prev" title="Hexo + Github Pages搭建个人博客教程">
                Hexo + Github Pages搭建个人博客教程 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/doggy.jpg"
                alt="andy Wong" />
            
              <p class="site-author-name" itemprop="name">andy Wong</p>
              <p class="site-description motion-element" itemprop="description">前端渣渣辉</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">62</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/chongdee" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                推荐阅读
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://juejin.cn/" title="掘金" target="_blank">掘金</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://segmentfault.com/" title="segmentfault" target="_blank">segmentfault</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.alloyteam.com/nav/" title="Web前端导航" target="_blank">Web前端导航</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://docschina.org/" title="印记中文" target="_blank">印记中文</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://es6.ruanyifeng.com/" title="阮一峰ES6书籍" target="_blank">阮一峰ES6书籍</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div> 
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#var-和-let-const-的比较"><span class="nav-number">1.</span> <span class="nav-text"><a href="#var-&#x548C;-let-const-&#x7684;&#x6BD4;&#x8F83;" class="headerlink" title="var &#x548C; let/const &#x7684;&#x6BD4;&#x8F83;"></a>var &#x548C; let/const &#x7684;&#x6BD4;&#x8F83;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用块级作用域代替-IIFES"><span class="nav-number">2.</span> <span class="nav-text"><a href="#&#x7528;&#x5757;&#x7EA7;&#x4F5C;&#x7528;&#x57DF;&#x4EE3;&#x66FF;-IIFES" class="headerlink" title="&#x7528;&#x5757;&#x7EA7;&#x4F5C;&#x7528;&#x57DF;&#x4EE3;&#x66FF; IIFES"></a>&#x7528;&#x5757;&#x7EA7;&#x4F5C;&#x7528;&#x57DF;&#x4EE3;&#x66FF; IIFES</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#箭头函数"><span class="nav-number">3.</span> <span class="nav-text"><a href="#&#x7BAD;&#x5934;&#x51FD;&#x6570;" class="headerlink" title="&#x7BAD;&#x5934;&#x51FD;&#x6570;"></a>&#x7BAD;&#x5934;&#x51FD;&#x6570;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串"><span class="nav-number">4.</span> <span class="nav-text"><a href="#&#x5B57;&#x7B26;&#x4E32;" class="headerlink" title="&#x5B57;&#x7B26;&#x4E32;"></a>&#x5B57;&#x7B26;&#x4E32;</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#模板字符串"><span class="nav-number">4.1.</span> <span class="nav-text"><a href="#&#x6A21;&#x677F;&#x5B57;&#x7B26;&#x4E32;" class="headerlink" title="&#x6A21;&#x677F;&#x5B57;&#x7B26;&#x4E32;"></a>&#x6A21;&#x677F;&#x5B57;&#x7B26;&#x4E32;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解构"><span class="nav-number">5.</span> <span class="nav-text"><a href="#&#x89E3;&#x6784;" class="headerlink" title="&#x89E3;&#x6784;"></a>&#x89E3;&#x6784;</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#解构数组"><span class="nav-number">5.1.</span> <span class="nav-text"><a href="#&#x89E3;&#x6784;&#x6570;&#x7EC4;" class="headerlink" title="&#x89E3;&#x6784;&#x6570;&#x7EC4;"></a>&#x89E3;&#x6784;&#x6570;&#x7EC4;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解构对象"><span class="nav-number">5.2.</span> <span class="nav-text"><a href="#&#x89E3;&#x6784;&#x5BF9;&#x8C61;" class="headerlink" title="&#x89E3;&#x6784;&#x5BF9;&#x8C61;"></a>&#x89E3;&#x6784;&#x5BF9;&#x8C61;</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最基本的解构"><span class="nav-number">5.2.1.</span> <span class="nav-text"><a href="#&#x6700;&#x57FA;&#x672C;&#x7684;&#x89E3;&#x6784;" class="headerlink" title="&#x6700;&#x57FA;&#x672C;&#x7684;&#x89E3;&#x6784;"></a>&#x6700;&#x57FA;&#x672C;&#x7684;&#x89E3;&#x6784;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解构并使用别名"><span class="nav-number">5.2.2.</span> <span class="nav-text"><a href="#&#x89E3;&#x6784;&#x5E76;&#x4F7F;&#x7528;&#x522B;&#x540D;" class="headerlink" title="&#x89E3;&#x6784;&#x5E76;&#x4F7F;&#x7528;&#x522B;&#x540D;"></a>&#x89E3;&#x6784;&#x5E76;&#x4F7F;&#x7528;&#x522B;&#x540D;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解构嵌套对象"><span class="nav-number">5.2.3.</span> <span class="nav-text"><a href="#&#x89E3;&#x6784;&#x5D4C;&#x5957;&#x5BF9;&#x8C61;" class="headerlink" title="&#x89E3;&#x6784;&#x5D4C;&#x5957;&#x5BF9;&#x8C61;"></a>&#x89E3;&#x6784;&#x5D4C;&#x5957;&#x5BF9;&#x8C61;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模块"><span class="nav-number">6.</span> <span class="nav-text"><a href="#&#x6A21;&#x5757;" class="headerlink" title="&#x6A21;&#x5757;"></a>&#x6A21;&#x5757;</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用CommonJS的导出"><span class="nav-number">6.1.</span> <span class="nav-text"><a href="#&#x4F7F;&#x7528;CommonJS&#x7684;&#x5BFC;&#x51FA;" class="headerlink" title="&#x4F7F;&#x7528;CommonJS&#x7684;&#x5BFC;&#x51FA;"></a>&#x4F7F;&#x7528;CommonJS&#x7684;&#x5BFC;&#x51FA;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用ES6的导出"><span class="nav-number">6.2.</span> <span class="nav-text"><a href="#&#x4F7F;&#x7528;ES6&#x7684;&#x5BFC;&#x51FA;" class="headerlink" title="&#x4F7F;&#x7528;ES6&#x7684;&#x5BFC;&#x51FA;"></a>&#x4F7F;&#x7528;ES6&#x7684;&#x5BFC;&#x51FA;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6-中的导入"><span class="nav-number">6.3.</span> <span class="nav-text"><a href="#ES6-&#x4E2D;&#x7684;&#x5BFC;&#x5165;" class="headerlink" title="ES6 &#x4E2D;&#x7684;&#x5BFC;&#x5165;"></a>ES6 &#x4E2D;&#x7684;&#x5BFC;&#x5165;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参数"><span class="nav-number">7.</span> <span class="nav-text"><a href="#&#x53C2;&#x6570;" class="headerlink" title="&#x53C2;&#x6570;"></a>&#x53C2;&#x6570;</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#默认参数"><span class="nav-number">7.1.</span> <span class="nav-text"><a href="#&#x9ED8;&#x8BA4;&#x53C2;&#x6570;" class="headerlink" title="&#x9ED8;&#x8BA4;&#x53C2;&#x6570;"></a>&#x9ED8;&#x8BA4;&#x53C2;&#x6570;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rest-参数"><span class="nav-number">7.2.</span> <span class="nav-text"><a href="#rest-&#x53C2;&#x6570;" class="headerlink" title="rest &#x53C2;&#x6570;"></a>rest &#x53C2;&#x6570;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#命名参数"><span class="nav-number">7.3.</span> <span class="nav-text"><a href="#&#x547D;&#x540D;&#x53C2;&#x6570;" class="headerlink" title="&#x547D;&#x540D;&#x53C2;&#x6570;"></a>&#x547D;&#x540D;&#x53C2;&#x6570;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#展开操作"><span class="nav-number">7.4.</span> <span class="nav-text"><a href="#&#x5C55;&#x5F00;&#x64CD;&#x4F5C;" class="headerlink" title="&#x5C55;&#x5F00;&#x64CD;&#x4F5C;"></a>&#x5C55;&#x5F00;&#x64CD;&#x4F5C;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类Classes"><span class="nav-number">8.</span> <span class="nav-text"><a href="#&#x7C7B;Classes" class="headerlink" title="&#x7C7B;Classes"></a>&#x7C7B;Classes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Symbols"><span class="nav-number">9.</span> <span class="nav-text"><a href="#Symbols" class="headerlink" title="Symbols"></a>Symbols</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maps"><span class="nav-number">10.</span> <span class="nav-text"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Promises"><span class="nav-number">11.</span> <span class="nav-text"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Generators-生成器"><span class="nav-number">12.</span> <span class="nav-text"><a href="#Generators-&#x751F;&#x6210;&#x5668;" class="headerlink" title="Generators &#x751F;&#x6210;&#x5668;"></a>Generators &#x751F;&#x6210;&#x5668;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Async-Await"><span class="nav-number">13.</span> <span class="nav-text"><a href="#Async-Await" class="headerlink" title="Async Await"></a>Async Await</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Getter-Setter-函数"><span class="nav-number">14.</span> <span class="nav-text"><a href="#Getter-Setter-&#x51FD;&#x6570;" class="headerlink" title="Getter/Setter &#x51FD;&#x6570;"></a>Getter/Setter &#x51FD;&#x6570;</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">Copyright &copy; 2015 - 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span>Powered By -</span>
  <span class="author" itemprop="copyrightHolder">andy Wong</span>

  
</div>


  <div>Theme by &copy;next</div>


<div>Hosted by <strong><a href="https://github.com/">Github Pages</a></strong></div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  


  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":true,"debug":false,"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"left","width":145,"height":315},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script>
</body>
</html>
